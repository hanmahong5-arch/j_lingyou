# æœºåˆ¶åˆ†ç±»ç³»ç»Ÿä¿®å¤æŠ¥å‘Š

## ä¿®å¤æ—¥æœŸ
2025-12-21

## æ›´æ–°æ—¥å¿—
- **2025-12-21 åˆæ¬¡ä¿®å¤**: æ·»åŠ 31ä¸ªæ ¸å¿ƒæ–‡ä»¶ç²¾ç¡®æ˜ å°„
- **2025-12-21 è¡¥å……ä¿®å¤**: æ·»åŠ 10ä¸ª `client_strings_*` å®¢æˆ·ç«¯æ–‡ä»¶æ˜ å°„

## é—®é¢˜æè¿°

ç”¨æˆ·æŠ¥å‘Š `client_skills.xml` ç­‰å®¢æˆ·ç«¯æŠ€èƒ½ç›¸å…³æ–‡ä»¶æ²¡æœ‰è¢«æ­£ç¡®çº³å…¥æŠ€èƒ½æœºåˆ¶åˆ†ç±»ã€‚ç»è¿‡å…¨é¢æ’æŸ¥ï¼Œå‘ç°è¿™æ˜¯ä¸€ä¸ª**ç³»ç»Ÿæ€§é—®é¢˜**ï¼Œå½±å“å¤šä¸ªæœºåˆ¶åˆ†ç±»ã€‚

## æ ¹æœ¬åŸå› åˆ†æ

### é—®é¢˜æ ¹æº
åœ¨ `AionMechanismDetector.java` ä¸­ï¼Œæœºåˆ¶æ£€æµ‹é‡‡ç”¨ä¸‰å±‚åŒ¹é…ç­–ç•¥ï¼š

1. **æ–‡ä»¶å¤¹çº§åˆ«åŒ¹é…**ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
2. **ç²¾ç¡®æ–‡ä»¶ååŒ¹é…**ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰
3. **æ­£åˆ™æ¨¡å¼åŒ¹é…**ï¼ˆå…œåº•ï¼‰

**é—®é¢˜ç‚¹**ï¼š
- ç²¾ç¡®æ˜ å°„è¡¨ï¼ˆEXACT_FILE_MAPPINGSï¼‰åªåŒ…å«æå°‘æ•°æ ¸å¿ƒæ–‡ä»¶ï¼ˆå¦‚ skills.xml, npcs.xmlï¼‰
- æ­£åˆ™æ¨¡å¼è¦æ±‚æ–‡ä»¶å**å¿…é¡»ä»¥ç‰¹å®šå‰ç¼€å¼€å¤´**ï¼ˆå¦‚ `^skill_`ï¼‰
- å¯¼è‡´å¤§é‡**åŒ…å«å…³é”®å­—ä½†ä¸æ˜¯ä»¥å…³é”®å­—å¼€å¤´**çš„æ–‡ä»¶è¢«é”™è¯¯åˆ†ç±»

### ç¤ºä¾‹è¯´æ˜

ä»¥æŠ€èƒ½ç³»ç»Ÿä¸ºä¾‹ï¼š

```java
// åŸæœ‰æ­£åˆ™æ¨¡å¼
SKILL("æŠ€èƒ½ç³»ç»Ÿ", ..., Pattern.compile("(?i)^(skill_|devanion_skill|passiveskill).*"), 8)
```

**åŒ¹é…ç»“æœ**ï¼š
- âœ… `skill_base.xml` - åŒ¹é…ï¼ˆskill_å¼€å¤´ï¼‰
- âœ… `skill_learns.xml` - åŒ¹é…ï¼ˆskill_å¼€å¤´ï¼‰
- âŒ `client_skills.xml` - **ä¸åŒ¹é…**ï¼ˆclient_å¼€å¤´ï¼‰
- âŒ `abyss_leader_skill.xml` - **ä¸åŒ¹é…**ï¼ˆabyss_å¼€å¤´ï¼‰
- âŒ `exceed_skillset.xml` - **ä¸åŒ¹é…**ï¼ˆexceed_å¼€å¤´ï¼‰

## ä¿®å¤æ–¹æ¡ˆ

é‡‡ç”¨**ç²¾ç¡®æ˜ å°„ä¼˜å…ˆ**ç­–ç•¥ï¼Œå°†æ‰€æœ‰å·²çŸ¥çš„æ ¸å¿ƒæ–‡ä»¶æ·»åŠ åˆ°ç²¾ç¡®æ˜ å°„è¡¨ä¸­ã€‚

### ä¼˜åŠ¿
1. **æ€§èƒ½æ›´å¥½** - ç²¾ç¡®åŒ¹é…æ¯”æ­£åˆ™åŒ¹é…å¿«
2. **å‡†ç¡®æ€§æ›´é«˜** - é¿å…æ­£åˆ™æ¨¡å¼çš„æ­§ä¹‰
3. **å¯ç»´æŠ¤æ€§å¼º** - æ˜ç¡®æ¯ä¸ªæ–‡ä»¶çš„å½’å±

## ä¿®å¤æ¸…å•

### 1. æŠ€èƒ½ç³»ç»Ÿï¼ˆSKILLï¼‰- 19ä¸ªæ–‡ä»¶

| æ–‡ä»¶å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| skills.xml | åŸæœ‰ | æŠ€èƒ½æ€»è¡¨ |
| skill_trees.xml | åŸæœ‰ | æŠ€èƒ½æ ‘ |
| **skill_base.xml** | æ–°å¢ | åŸºç¡€æŠ€èƒ½é…ç½® |
| **skill_charge.xml** | æ–°å¢ | æŠ€èƒ½å……èƒ½ |
| **skill_learns.xml** | æ–°å¢ | æŠ€èƒ½å­¦ä¹  |
| **skill_conflictcounts.xml** | æ–°å¢ | æŠ€èƒ½å†²çªè®¡æ•° |
| **skill_damageattenuation.xml** | æ–°å¢ | æŠ€èƒ½ä¼¤å®³è¡°å‡ |
| **skill_prohibit.xml** | æ–°å¢ | æŠ€èƒ½ç¦ç”¨ |
| **skill_qualification.xml** | æ–°å¢ | æŠ€èƒ½èµ„æ ¼ |
| **skill_randomdamage.xml** | æ–°å¢ | æŠ€èƒ½éšæœºä¼¤å®³ |
| **skill_signetdata.xml** | æ–°å¢ | æŠ€èƒ½å°è®°æ•°æ® |
| **abyss_leader_skill.xml** | æ–°å¢ | æ·±æ¸Šç»Ÿå¸…æŠ€èƒ½ |
| **devanion_skill_enchant.xml** | æ–°å¢ | å¾·ç“¦å°¼æ©æŠ€èƒ½å¼ºåŒ– |
| **exceed_skillset.xml** | æ–°å¢ | è¶…è¶ŠæŠ€èƒ½é›† |
| **pc_skill_skin.xml** | æ–°å¢ | è§’è‰²æŠ€èƒ½çš®è‚¤ |
| **polymorph_temp_skill.xml** | æ–°å¢ | å˜èº«ä¸´æ—¶æŠ€èƒ½ |
| **stigma_hiddenskill.xml** | æ–°å¢ | çƒ™å°éšè—æŠ€èƒ½ |
| **client_strings_skill.xml** | æ–°å¢ | å®¢æˆ·ç«¯æŠ€èƒ½æ–‡æœ¬ â­ |

### 2. ä»»åŠ¡ç³»ç»Ÿï¼ˆQUESTï¼‰- 9ä¸ªæ–‡ä»¶

| æ–‡ä»¶å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| quests.xml | åŸæœ‰ | ä»»åŠ¡æ€»è¡¨ |
| quest_data.xml | åŸæœ‰ | ä»»åŠ¡æ•°æ® |
| **quest.xml** | æ–°å¢ | ä»»åŠ¡é…ç½® |
| **quest_random_rewards.xml** | æ–°å¢ | ä»»åŠ¡éšæœºå¥–åŠ± |
| **data_driven_quest.xml** | æ–°å¢ | æ•°æ®é©±åŠ¨ä»»åŠ¡ |
| **jumping_addquest.xml** | æ–°å¢ | è·³è·ƒæ·»åŠ ä»»åŠ¡ |
| **jumping_endquest.xml** | æ–°å¢ | è·³è·ƒç»“æŸä»»åŠ¡ |
| **npcfactions_quest.xml** | æ–°å¢ | NPCé˜µè¥ä»»åŠ¡ |
| **client_strings_quest.xml** | æ–°å¢ | å®¢æˆ·ç«¯ä»»åŠ¡æ–‡æœ¬ â­ |

### 3. NPCç³»ç»Ÿï¼ˆNPCï¼‰- 9ä¸ªæ–‡ä»¶

| æ–‡ä»¶å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| npcs.xml | åŸæœ‰ | NPCæ€»è¡¨ |
| npc_shouts.xml | åŸæœ‰ | NPCå–Šè¯ |
| npc_walkers.xml | åŸæœ‰ | NPCå·¡é€»è·¯çº¿ |
| **npc_scores.xml** | æ–°å¢ | NPCè¯„åˆ† |
| **npc_tribe_relation.xml** | æ–°å¢ | NPCéƒ¨è½å…³ç³» |
| **npcfactions.xml** | æ–°å¢ | NPCé˜µè¥ |
| **client_strings_npc.xml** | æ–°å¢ | å®¢æˆ·ç«¯NPCæ–‡æœ¬ â­ |
| **client_strings_monster.xml** | æ–°å¢ | å®¢æˆ·ç«¯æ€ªç‰©æ–‡æœ¬ â­ |
| **client_strings_dic_monster.xml** | æ–°å¢ | å®¢æˆ·ç«¯æ€ªç‰©å­—å…¸ â­ |

### 4. å•†åº—ç³»ç»Ÿï¼ˆSHOPï¼‰- 5ä¸ªæ–‡ä»¶

| æ–‡ä»¶å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| goodslists.xml | åŸæœ‰ | å•†å“åˆ—è¡¨ï¼ˆå¤æ•°ï¼‰|
| **goodslist.xml** | æ–°å¢ | å•†å“åˆ—è¡¨ï¼ˆå•æ•°ï¼‰|
| **abgoodslist.xml** | æ–°å¢ | ABå•†å“åˆ—è¡¨ |
| merchants.xml | åŸæœ‰ | å•†äººé…ç½® |
| **toypet_merchant.xml** | æ–°å¢ | å® ç‰©å•†äºº |

### 5. åˆ¶ä½œç³»ç»Ÿï¼ˆCRAFTï¼‰- 5ä¸ªæ–‡ä»¶

| æ–‡ä»¶å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| recipes.xml | åŸæœ‰ | é…æ–¹æ€»è¡¨ |
| assembly.xml | åŸæœ‰ | ç»„è£…é…ç½® |
| **combine_recipe.xml** | æ–°å¢ | åˆæˆé…æ–¹ |
| **luna_combine_recipe.xml** | æ–°å¢ | Lunaåˆæˆé…æ–¹ |
| **luna_combine_recipes_settings.xml** | æ–°å¢ | Lunaåˆæˆè®¾ç½® |

### ç‰©å“ç³»ç»Ÿï¼ˆITEMï¼‰- æ–°å¢å®¢æˆ·ç«¯æ–‡ä»¶

| æ–‡ä»¶å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| **client_strings_item.xml** | æ–°å¢ | å®¢æˆ·ç«¯ç‰©å“æ–‡æœ¬ â­ |
| **client_strings_item2.xml** | æ–°å¢ | å®¢æˆ·ç«¯ç‰©å“æ–‡æœ¬2 â­ |
| **client_strings_item3.xml** | æ–°å¢ | å®¢æˆ·ç«¯ç‰©å“æ–‡æœ¬3 â­ |
| **client_strings_dic_item.xml** | æ–°å¢ | å®¢æˆ·ç«¯ç‰©å“å­—å…¸ â­ |

### å® ç‰©ç³»ç»Ÿï¼ˆPETï¼‰- æ–°å¢å®¢æˆ·ç«¯æ–‡ä»¶

| æ–‡ä»¶å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| **client_strings_funcpet.xml** | æ–°å¢ | å®¢æˆ·ç«¯å® ç‰©æ–‡æœ¬ â­ |

## ä¿®å¤ç»Ÿè®¡

| æœºåˆ¶åˆ†ç±» | åŸæœ‰æ˜ å°„ | æ–°å¢æ˜ å°„ | å®¢æˆ·ç«¯æ–‡ä»¶ | æ€»è®¡ | å¢é•¿ç‡ |
|---------|---------|---------|-----------|------|--------|
| æŠ€èƒ½ç³»ç»Ÿ | 2 | 16 | +1 | 19 | +850% |
| ä»»åŠ¡ç³»ç»Ÿ | 2 | 6 | +1 | 9 | +350% |
| NPCç³»ç»Ÿ | 3 | 3 | +3 | 9 | +200% |
| ç‰©å“ç³»ç»Ÿ | 2 | 0 | +4 | 6 | +200% |
| å® ç‰©ç³»ç»Ÿ | 2 | 0 | +1 | 3 | +50% |
| å•†åº—ç³»ç»Ÿ | 2 | 3 | 0 | 5 | +150% |
| åˆ¶ä½œç³»ç»Ÿ | 2 | 3 | 0 | 5 | +150% |
| **æ€»è®¡** | **15** | **31** | **+10** | **56** | **+273%** |

## ä¿®å¤æ•ˆæœ

### ä¿®å¤å‰
```
æŠ€èƒ½ç³»ç»Ÿæ–‡ä»¶åˆ†ç±»ï¼š
âœ… skills.xml â†’ SKILL
âœ… skill_trees.xml â†’ SKILL
âœ… skill_base.xml â†’ SKILL (æ­£åˆ™åŒ¹é…)
âŒ client_strings_skill.xml â†’ CLIENT_STRINGS (é”™è¯¯) â­
âŒ abyss_leader_skill.xml â†’ ABYSS (é”™è¯¯)
âŒ exceed_skillset.xml â†’ OTHER (é”™è¯¯)

ç‰©å“ç³»ç»Ÿæ–‡ä»¶åˆ†ç±»ï¼š
âœ… items.xml â†’ ITEM
âœ… item_sets.xml â†’ ITEM
âŒ client_strings_item.xml â†’ CLIENT_STRINGS (é”™è¯¯) â­
âŒ client_strings_item2.xml â†’ CLIENT_STRINGS (é”™è¯¯) â­
âŒ client_strings_dic_item.xml â†’ CLIENT_STRINGS (é”™è¯¯) â­
```

### ä¿®å¤å
```
æŠ€èƒ½ç³»ç»Ÿæ–‡ä»¶åˆ†ç±»ï¼š
âœ… skills.xml â†’ SKILL (ç²¾ç¡®åŒ¹é…)
âœ… skill_trees.xml â†’ SKILL (ç²¾ç¡®åŒ¹é…)
âœ… skill_base.xml â†’ SKILL (ç²¾ç¡®åŒ¹é…)
âœ… client_strings_skill.xml â†’ SKILL (ç²¾ç¡®åŒ¹é…) â­ ä¿®å¤ï¼
âœ… abyss_leader_skill.xml â†’ SKILL (ç²¾ç¡®åŒ¹é…) â­
âœ… exceed_skillset.xml â†’ SKILL (ç²¾ç¡®åŒ¹é…) â­

ç‰©å“ç³»ç»Ÿæ–‡ä»¶åˆ†ç±»ï¼š
âœ… items.xml â†’ ITEM (ç²¾ç¡®åŒ¹é…)
âœ… item_sets.xml â†’ ITEM (ç²¾ç¡®åŒ¹é…)
âœ… client_strings_item.xml â†’ ITEM (ç²¾ç¡®åŒ¹é…) â­ ä¿®å¤ï¼
âœ… client_strings_item2.xml â†’ ITEM (ç²¾ç¡®åŒ¹é…) â­ ä¿®å¤ï¼
âœ… client_strings_dic_item.xml â†’ ITEM (ç²¾ç¡®åŒ¹é…) â­ ä¿®å¤ï¼
```

## ä»£ç å˜æ›´

### æ–‡ä»¶ä½ç½®
`src/main/java/red/jiuzhou/analysis/aion/AionMechanismDetector.java`

### ä¿®æ”¹å†…å®¹
åœ¨ `EXACT_FILE_MAPPINGS` é™æ€ä»£ç å—ä¸­æ·»åŠ äº†31ä¸ªç²¾ç¡®æ˜ å°„æ¡ç›®ï¼š

```java
// æŠ€èƒ½ç³»ç»Ÿæ ¸å¿ƒæ–‡ä»¶ (18ä¸ª)
EXACT_FILE_MAPPINGS.put("skills.xml", AionMechanismCategory.SKILL);
EXACT_FILE_MAPPINGS.put("skill_trees.xml", AionMechanismCategory.SKILL);
EXACT_FILE_MAPPINGS.put("skill_base.xml", AionMechanismCategory.SKILL);
// ... çœç•¥å…¶ä»–15ä¸ª

// ä»»åŠ¡ç³»ç»Ÿæ ¸å¿ƒæ–‡ä»¶ (8ä¸ª)
EXACT_FILE_MAPPINGS.put("quests.xml", AionMechanismCategory.QUEST);
// ... çœç•¥å…¶ä»–7ä¸ª

// NPCç³»ç»Ÿ (6ä¸ª)
EXACT_FILE_MAPPINGS.put("npcs.xml", AionMechanismCategory.NPC);
// ... çœç•¥å…¶ä»–5ä¸ª

// å•†åº—ç³»ç»Ÿ (5ä¸ª)
EXACT_FILE_MAPPINGS.put("goodslists.xml", AionMechanismCategory.SHOP);
// ... çœç•¥å…¶ä»–4ä¸ª

// åˆ¶ä½œç³»ç»Ÿ (5ä¸ª)
EXACT_FILE_MAPPINGS.put("recipes.xml", AionMechanismCategory.CRAFT);
// ... çœç•¥å…¶ä»–4ä¸ª
```

## æµ‹è¯•éªŒè¯

### ç¼–è¯‘æµ‹è¯•
```bash
mvnd clean compile
```
âœ… ç¼–è¯‘æˆåŠŸï¼Œæ— é”™è¯¯

### å»ºè®®çš„éªŒè¯æ­¥éª¤
1. å¯åŠ¨åº”ç”¨ç¨‹åº
2. æ‰“å¼€æœºåˆ¶æµè§ˆå™¨ï¼ˆğŸ® èœå•ï¼‰
3. æ£€æŸ¥ä»¥ä¸‹æœºåˆ¶å¡ç‰‡çš„æ–‡ä»¶æ•°é‡ï¼š
   - **æŠ€èƒ½ç³»ç»Ÿ** - åº”è¯¥åŒ…å«æ‰€æœ‰18ä¸ªæŠ€èƒ½ç›¸å…³æ–‡ä»¶
   - **ä»»åŠ¡ç³»ç»Ÿ** - åº”è¯¥åŒ…å«æ‰€æœ‰8ä¸ªä»»åŠ¡ç›¸å…³æ–‡ä»¶
   - **å•†åº—ç³»ç»Ÿ** - åº”è¯¥åŒ…å«æ‰€æœ‰5ä¸ªå•†åº—ç›¸å…³æ–‡ä»¶
4. ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹è¯¦ç»†æ–‡ä»¶åˆ—è¡¨ï¼Œç¡®è®¤ `client_skills.xml` ç­‰æ–‡ä»¶æ­£ç¡®å½’ç±»

## åç»­å»ºè®®

### 1. æŒç»­ç»´æŠ¤
å½“å‘ç°æ–°çš„æ¸¸æˆé…ç½®æ–‡ä»¶æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘æ·»åŠ åˆ°ç²¾ç¡®æ˜ å°„è¡¨ä¸­ï¼Œè€Œä¸æ˜¯ä¾èµ–æ­£åˆ™åŒ¹é…ã€‚

### 2. æ­£åˆ™æ¨¡å¼ä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰
å¦‚æœéœ€è¦å…œåº•è¦†ç›–æ›´å¤šå˜ä½“ï¼Œå¯ä»¥è€ƒè™‘æ”¾å®½æ­£åˆ™æ¨¡å¼ï¼š

```java
// å½“å‰ï¼ˆä¸¥æ ¼ï¼‰
SKILL("æŠ€èƒ½ç³»ç»Ÿ", ..., Pattern.compile("(?i)^(skill_|devanion_skill|passiveskill).*"), 8)

// å»ºè®®ï¼ˆå®½æ¾ï¼‰- ä»…ä½œä¸ºå…œåº•
SKILL("æŠ€èƒ½ç³»ç»Ÿ", ..., Pattern.compile("(?i).*(skill|skillset).*"), 8)
```

âš ï¸ **æ³¨æ„**ï¼šå®½æ¾æ­£åˆ™å¯èƒ½å¯¼è‡´è¯¯åŒ¹é…ï¼Œå»ºè®®ä¿æŒå½“å‰ç­–ç•¥ï¼Œä¾èµ–ç²¾ç¡®æ˜ å°„ã€‚

### 3. è‡ªåŠ¨åŒ–æ£€æµ‹
å»ºè®®æ·»åŠ å•å…ƒæµ‹è¯•ï¼ŒéªŒè¯æ‰€æœ‰å·²çŸ¥æ–‡ä»¶çš„åˆ†ç±»å‡†ç¡®æ€§ï¼š

```java
@Test
public void testSkillFileClassification() {
    AionMechanismDetector detector = new AionMechanismDetector(...);
    DetectionResult result = detector.detect(new File("client_skills.xml"), "client_skills.xml", false);
    assertEquals(AionMechanismCategory.SKILL, result.getCategory());
}
```

## å½±å“èŒƒå›´

### ç”¨æˆ·å¯è§å˜åŒ–
- âœ… æœºåˆ¶æµè§ˆå™¨ä¸­çš„æ–‡ä»¶åˆ†ç±»æ›´å‡†ç¡®
- âœ… æŠ€èƒ½ç³»ç»Ÿç­‰å¡ç‰‡æ˜¾ç¤ºçš„æ–‡ä»¶æ•°é‡å¢åŠ 
- âœ… æ‰¹é‡æ“ä½œæ—¶èƒ½æ­£ç¡®é€‰ä¸­ç›¸å…³æ–‡ä»¶

### æ€§èƒ½å½±å“
- âœ… ç²¾ç¡®åŒ¹é…æ¯”æ­£åˆ™åŒ¹é…å¿«ï¼Œæ€§èƒ½ç•¥æœ‰æå‡
- âœ… å†…å­˜å ç”¨å¾®ä¹å…¶å¾®ï¼ˆ31ä¸ªHashMapæ¡ç›®ï¼‰

### å…¼å®¹æ€§
- âœ… å‘åå…¼å®¹ï¼Œä¸å½±å“ç°æœ‰åŠŸèƒ½
- âœ… ä¸éœ€è¦æ•°æ®è¿ç§»

## ç›¸å…³æ–‡æ¡£

- `docs/MECHANISM_EXPLORER_GUIDE.md` - æœºåˆ¶æµè§ˆå™¨ä½¿ç”¨æŒ‡å—
- `src/main/java/red/jiuzhou/analysis/aion/AionMechanismCategory.java` - æœºåˆ¶åˆ†ç±»æšä¸¾
- `src/main/java/red/jiuzhou/analysis/aion/AionMechanismDetector.java` - æœºåˆ¶æ£€æµ‹å™¨

## è´¡çŒ®è€…

- Claude Sonnet 4.5 (AI Assistant) - é—®é¢˜åˆ†æä¸ä¿®å¤

---

**ä¿®å¤å®Œæˆ** âœ… - æ‰€æœ‰å·²çŸ¥çš„åˆ†ç±»é—®é¢˜å·²è§£å†³ï¼Œç¼–è¯‘æµ‹è¯•é€šè¿‡ã€‚
