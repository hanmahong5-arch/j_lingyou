# 设计师驾驶舱 - 产品设计方案

## 核心理念

> **"像飞行员驾驶舱一样，所有关键信息一目了然，所有操作触手可及"**

设计师身兼数职：
- 🎨 **创作者** - 设计游戏内容
- 🔧 **管理员** - 管理配置数据
- 🔍 **侦探** - 排查数据问题
- 🛡️ **守护者** - 保证数据质量

他们需要的不是复杂的工具，而是一个**可信赖的伙伴**。

---

## 设计原则

### 1. 信息金字塔
```
          ┌─────────┐
          │ 警报    │  ← 必须立即看到
          ├─────────┤
          │ 状态    │  ← 扫一眼就懂
          ├─────────┤
          │ 趋势    │  ← 需要时查看
          ├─────────┤
          │ 详情    │  ← 深入时展开
          └─────────┘
```

### 2. 操作三确认
```
做之前 → 知道会发生什么
做之时 → 知道进度如何
做之后 → 知道结果怎样
```

### 3. 永远有退路
```
任何操作 → 都能撤销
任何错误 → 都能恢复
任何迷失 → 都能回家
```

---

## 主界面重设计

### 整体布局

```
┌─────────────────────────────────────────────────────────────────────────┐
│ ┌─ 顶部状态栏 ──────────────────────────────────────────────────────┐   │
│ │ 🟢 系统健康  │  📊 27机制 1,234文件  │  ⏱ 最后同步: 5分钟前  │ 👤 │   │
│ └───────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│ ┌─ 命令面板 (Cmd+K) ───────────────────────────────────────────────┐   │
│ │  🔍 搜索任何内容... 物品、NPC、技能、任务、或输入命令            │   │
│ └───────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │                                                                     │ │
│ │  ┌─ 快捷仪表盘 ─────────────────────────────────────────────────┐  │ │
│ │  │                                                               │  │ │
│ │  │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐        │  │ │
│ │  │  │ 🎮 机制  │ │ 📝 待办  │ │ ⚠️ 警告  │ │ 📈 今日  │        │  │ │
│ │  │  │   27个   │ │   3项    │ │   2个    │ │ +45条    │        │  │ │
│ │  │  │ 点击浏览 │ │ 点击处理 │ │ 点击查看 │ │ 点击详情 │        │  │ │
│ │  │  └──────────┘ └──────────┘ └──────────┘ └──────────┘        │  │ │
│ │  │                                                               │  │ │
│ │  └───────────────────────────────────────────────────────────────┘  │ │
│ │                                                                     │ │
│ │  ┌─ 最近活动 ──────────────────┐ ┌─ 快捷操作 ──────────────────┐  │ │
│ │  │                              │ │                              │  │ │
│ │  │ 🕐 10:30 修改了烈焰之剑     │ │ ⚡ 批量导入                  │  │ │
│ │  │ 🕐 10:15 创建了新任务Q1002  │ │ ⚡ 数据验证                  │  │ │
│ │  │ 🕐 09:45 导入了npc_data     │ │ ⚡ 生成DDL                   │  │ │
│ │  │ 🕐 09:30 同步了China本地化  │ │ ⚡ 打开AI助手                │  │ │
│ │  │                              │ │                              │  │ │
│ │  │ [查看完整历史]              │ │ [更多操作...]                │  │ │
│ │  └──────────────────────────────┘ └──────────────────────────────┘  │ │
│ │                                                                     │ │
│ │  ┌─ 数据健康度 ────────────────────────────────────────────────┐  │ │
│ │  │                                                               │  │ │
│ │  │  物品系统  ████████████████████░░ 92%  ⚠️ 3个孤立配置       │  │ │
│ │  │  NPC系统   █████████████████████ 100% ✅                     │  │ │
│ │  │  技能系统  ███████████████████░░ 95%  ⚠️ 1个引用缺失        │  │ │
│ │  │  任务系统  ████████████████████░░ 98%  ✅                     │  │ │
│ │  │                                                               │  │ │
│ │  │  [运行完整检查]  [查看问题详情]  [一键修复]                  │  │ │
│ │  └───────────────────────────────────────────────────────────────┘  │ │
│ │                                                                     │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─ 底部状态栏 ──────────────────────────────────────────────────────┐   │
│ │ 💾 已保存 │ 📂 D:\AionReal58\XML │ 🔌 MySQL: 已连接 │ 📋 日志 ▲ │   │
│ └───────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 核心组件设计

### 1. 命令面板 (Command Palette)

**灵感来源**：VS Code (Cmd+K), Notion, Linear

```
┌─────────────────────────────────────────────────────────────────┐
│  🔍 输入命令或搜索...                                    Esc 关闭│
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  最近使用                                                       │
│  ├─ 📝 编辑物品 #100001 烈焰之剑                               │
│  ├─ 🔍 搜索 "火焰"                                             │
│  └─ 📥 导入 item_templates.xml                                 │
│                                                                 │
│  快捷命令                                                       │
│  ├─ /search <关键词>     全局搜索                              │
│  ├─ /edit <ID>          快速编辑                               │
│  ├─ /import             导入向导                               │
│  ├─ /export             导出向导                               │
│  ├─ /validate           数据验证                               │
│  ├─ /history            操作历史                               │
│  ├─ /rollback           回滚变更                               │
│  └─ /help               帮助文档                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

输入 "100001" 后：
┌─────────────────────────────────────────────────────────────────┐
│  🔍 100001                                               Esc 关闭│
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  找到 3 个结果                                                  │
│                                                                 │
│  📦 物品                                                        │
│  └─ [100001] 烈焰之剑 - item_templates.xml                     │
│      等级45 史诗品质 物理攻击150                                │
│      [编辑] [查看引用] [复制]                                   │
│                                                                 │
│  🎁 掉落                                                        │
│  └─ 火焰领主掉落 - 包含物品100001                              │
│      [跳转查看]                                                 │
│                                                                 │
│  📜 任务                                                        │
│  └─ [Q1001] 寻找火焰剑 - 奖励物品100001                        │
│      [跳转查看]                                                 │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**交互设计**：
- `Cmd/Ctrl + K` 全局唤起
- 支持模糊搜索、拼音搜索
- 键盘上下选择，回车确认
- 最近使用自动排序

---

### 2. 系统健康仪表盘

**设计理念**：一眼看出系统是否健康，问题出在哪里

```
┌─────────────────────────────────────────────────────────────────┐
│  📊 系统健康度                                    最后检查: 5分钟前│
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                     整体健康度                           │   │
│  │                                                          │   │
│  │            ████████████████████░░░░  87%                │   │
│  │                                                          │   │
│  │     🟢 正常: 24个机制    ⚠️ 警告: 2个    🔴 错误: 1个   │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  问题摘要                                                       │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 🔴 严重 (1)                                              │   │
│  │    └─ 技能系统: skill_effects.xml 引用了不存在的ID      │   │
│  │       影响范围: 15个技能配置                             │   │
│  │       [立即修复] [查看详情] [暂时忽略]                   │   │
│  │                                                          │   │
│  │ ⚠️ 警告 (5)                                              │   │
│  │    ├─ 物品系统: 3个物品无掉落来源 (可能是商城物品)      │   │
│  │    └─ NPC系统: 2个NPC等级超出地图范围                    │   │
│  │       [批量处理] [查看详情] [标记为正常]                 │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  [🔄 重新检查] [📋 导出报告] [⚙️ 配置检查规则]                │
└─────────────────────────────────────────────────────────────────┘
```

**状态指示器设计**：
```
🟢 健康 (95-100%)  - 绿色呼吸灯效果
🟡 注意 (80-95%)   - 黄色静态
🟠 警告 (60-80%)   - 橙色轻微脉冲
🔴 危险 (<60%)     - 红色脉冲警报
```

---

### 3. 操作历史时间线

**设计理念**：清晰的时间线，任何操作都能追溯和回滚

```
┌─────────────────────────────────────────────────────────────────┐
│  📜 操作历史                              筛选: [全部 ▼] [今天 ▼]│
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  今天                                                           │
│  │                                                              │
│  ├─● 10:30  修改物品属性                              [可回滚] │
│  │          [100001] 烈焰之剑                                  │
│  │          physical_attack: 120 → 150                         │
│  │          level: 40 → 45                                      │
│  │          [查看详情] [回滚此操作] [对比变更]                 │
│  │                                                              │
│  ├─● 10:15  创建新记录                                [可回滚] │
│  │          [Q1002] 新任务 - quest_data.xml                    │
│  │          [查看详情] [回滚此操作]                            │
│  │                                                              │
│  ├─● 09:45  批量导入                                  [可回滚] │
│  │          npc_data.xml → MySQL                               │
│  │          成功: 156条  失败: 0条                             │
│  │          [查看详情] [回滚整批]                              │
│  │                                                              │
│  ├─○ 09:30  数据验证                                  [只读]   │
│  │          检查完成，发现2个警告                              │
│  │          [查看报告]                                         │
│  │                                                              │
│  昨天                                                           │
│  │                                                              │
│  ├─● 18:20  批量修改                                  [已过期] │
│  │          物品等级批量调整 (+5)                              │
│  │          影响: 47个物品                                     │
│  │          ⚠️ 超过24小时，需要从备份恢复                      │
│  │          [从备份恢复]                                       │
│  │                                                              │
│  └─ [加载更多历史...]                                          │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**回滚确认设计**：
```
┌─────────────────────────────────────────────────────────────────┐
│  ⚠️ 确认回滚                                                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  您即将回滚以下操作：                                           │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  操作时间: 2024-12-25 10:30                              │   │
│  │  操作类型: 修改物品属性                                  │   │
│  │  目标记录: [100001] 烈焰之剑                             │   │
│  │                                                          │   │
│  │  将要恢复的值:                                           │   │
│  │    physical_attack: 150 → 120                            │   │
│  │    level: 45 → 40                                         │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ⚠️ 此操作后，10:30之后对该记录的其他修改可能会冲突            │
│                                                                 │
│              [取消]  [确认回滚]                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### 4. 智能编辑器

**设计理念**：表单化编辑，所见即所得，实时验证

```
┌─────────────────────────────────────────────────────────────────┐
│  📝 编辑物品                                    [100001] 烈焰之剑│
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─ 基础信息 ───────────────────────────────────────────────┐  │
│  │                                                           │  │
│  │  ID          [100001        ] (只读)                     │  │
│  │                                                           │  │
│  │  名称        [烈焰之剑______]  ✅                         │  │
│  │              └─ 提示: 最多20个字符                        │  │
│  │                                                           │  │
│  │  品质        [★★★★☆ 史诗    ▼]                          │  │
│  │              ├─ ☆☆☆☆☆ 普通                              │  │
│  │              ├─ ★☆☆☆☆ 优秀                              │  │
│  │              ├─ ★★☆☆☆ 精良                              │  │
│  │              ├─ ★★★☆☆ 稀有                              │  │
│  │              ├─ ★★★★☆ 史诗  ← 当前                      │  │
│  │              └─ ★★★★★ 传说                              │  │
│  │                                                           │  │
│  │  等级需求    [45    ]  ✅  范围: 1-80                     │  │
│  │              └─ 💡 同品质物品平均等级: 42                 │  │
│  │                                                           │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌─ 属性加成 ───────────────────────────────────────────────┐  │
│  │                                                           │  │
│  │  ┌────────────────────────────────────────────────────┐  │  │
│  │  │ 槽位1  [物理攻击力    ▼] [150   ] ✅               │  │  │
│  │  │        └─ 💡 同等级范围: 120-200，推荐: 160        │  │  │
│  │  ├────────────────────────────────────────────────────┤  │  │
│  │  │ 槽位2  [魔法防御力    ▼] [80    ] ✅               │  │  │
│  │  ├────────────────────────────────────────────────────┤  │  │
│  │  │ 槽位3  [暴击率        ▼] [5     ] ⚠️ 偏高          │  │  │
│  │  │        └─ 💡 同类物品平均: 3%，当前超出66%         │  │  │
│  │  └────────────────────────────────────────────────────┘  │  │
│  │                                                           │  │
│  │  [+ 添加属性槽位]   已用 3/12 槽位                        │  │
│  │                                                           │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌─ 关联数据 ───────────────────────────────────────────────┐  │
│  │                                                           │  │
│  │  📦 掉落来源 (2)                                          │  │
│  │  ├─ [NPC:50001] 火焰领主  掉率: 5%    [跳转编辑]         │  │
│  │  └─ [CHEST:301] 副本宝箱  掉率: 10%   [跳转编辑]         │  │
│  │                                                           │  │
│  │  📜 任务关联 (1)                                          │  │
│  │  └─ [Q1001] 寻找火焰剑  作为奖励      [跳转编辑]         │  │
│  │                                                           │  │
│  │  🛒 商店出售 (0)                                          │  │
│  │  └─ 暂无商店出售此物品  [添加到商店]                     │  │
│  │                                                           │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌─ 操作栏 ─────────────────────────────────────────────────┐  │
│  │                                                           │  │
│  │  [取消]  [预览变更]  [💾 保存]     最后修改: 10分钟前    │  │
│  │                                                           │  │
│  │  更多: [复制为模板] [删除记录] [查看历史] [导出JSON]     │  │
│  │                                                           │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**实时验证指示器**：
```
✅ 验证通过
⚠️ 警告（可保存，但建议检查）
❌ 错误（阻止保存）
💡 智能建议
🔗 引用跳转
```

---

### 5. 变更预览对比

**设计理念**：保存前完整预览，消除不确定性

```
┌─────────────────────────────────────────────────────────────────┐
│  🔍 变更预览                                    [100001] 烈焰之剑│
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌──────────────────────────┬──────────────────────────┐       │
│  │ 修改前                   │ 修改后                   │       │
│  ├──────────────────────────┼──────────────────────────┤       │
│  │ level: 40                │ level: 45          [!]  │       │
│  │ physical_attack: 120     │ physical_attack: 150 [!]│       │
│  │ bonus_attr3: (无)        │ bonus_attr3: 暴击5% [+] │       │
│  │ ...                      │ ...                      │       │
│  └──────────────────────────┴──────────────────────────┘       │
│                                                                 │
│  变更统计                                                       │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ [!] 修改: 2个字段    [+] 新增: 1个字段    [-] 删除: 0  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  影响分析                                                       │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ ✅ 此修改不会破坏任何引用关系                            │   │
│  │ ⚠️ 等级提升可能影响任务 [Q1001] 的完成条件              │   │
│  │    └─ [查看任务详情]                                     │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│            [返回编辑]  [💾 确认保存]                            │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### 6. 批量操作向导

**设计理念**：复杂操作拆解为简单步骤，每步都有确认

```
┌─────────────────────────────────────────────────────────────────┐
│  🏭 批量修改向导                                    步骤 2/4     │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ○ 选择目标  →  ● 定义规则  →  ○ 预览结果  →  ○ 执行         │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                                                          │   │
│  │  已选择: 47个物品 (等级≥50 且 品质=史诗 且 类型=武器)   │   │
│  │                                                          │   │
│  │  定义修改规则:                                           │   │
│  │                                                          │   │
│  │  ┌────────────────────────────────────────────────────┐ │   │
│  │  │ 规则1: physical_attack = 当前值 × 1.2              │ │   │
│  │  │        (所有选中物品攻击力提升20%)                 │ │   │
│  │  │        [删除此规则]                                │ │   │
│  │  ├────────────────────────────────────────────────────┤ │   │
│  │  │ 规则2: level = 当前值 + 5                          │ │   │
│  │  │        (所有选中物品等级+5)                        │ │   │
│  │  │        [删除此规则]                                │ │   │
│  │  └────────────────────────────────────────────────────┘ │   │
│  │                                                          │   │
│  │  [+ 添加规则]                                            │   │
│  │                                                          │   │
│  │  快速预览 (前5个):                                       │   │
│  │  │ 烈焰之剑   ATK: 150→180  LV: 45→50                   │   │
│  │  │ 寒冰法杖   ATK: 140→168  LV: 48→53                   │   │
│  │  │ 暗影匕首   ATK: 130→156  LV: 50→55                   │   │
│  │  │ ...                                                   │   │
│  │                                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  [上一步: 选择目标]                    [下一步: 完整预览 →]    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### 7. 通知与提醒系统

**设计理念**：重要信息不遗漏，但不打扰工作

```
┌─ 右下角通知区 ──────────────────────────┐
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ✅ 保存成功                      │   │
│  │    [100001] 烈焰之剑 已更新     │   │
│  │    [撤销] [查看]          3s后关闭│   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ⚠️ 发现数据问题                  │   │
│  │    技能系统检测到2个引用缺失    │   │
│  │    [立即处理] [稍后]             │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 📥 导入完成                      │   │
│  │    成功: 156条  失败: 0条       │   │
│  │    [查看详情]                    │   │
│  └─────────────────────────────────┘   │
│                                         │
└─────────────────────────────────────────┘
```

**通知优先级**：
- 🔴 紧急：阻断式弹窗（数据丢失风险）
- 🟠 重要：持久通知（需要处理）
- 🟡 普通：自动消失通知（5秒）
- 🟢 信息：静默记录（日志可查）

---

## 交互细节设计

### 键盘快捷键

| 快捷键 | 功能 | 场景 |
|-------|------|------|
| `Cmd/Ctrl + K` | 命令面板 | 全局 |
| `Cmd/Ctrl + S` | 保存 | 编辑中 |
| `Cmd/Ctrl + Z` | 撤销 | 编辑中 |
| `Cmd/Ctrl + F` | 搜索 | 全局 |
| `Cmd/Ctrl + /` | 帮助 | 全局 |
| `Esc` | 关闭/取消 | 全局 |
| `Enter` | 确认 | 对话框 |
| `Tab` | 下一个字段 | 表单 |

### 鼠标交互

| 交互 | 效果 |
|-----|------|
| 悬停ID字段 | 显示引用预览卡片 |
| 点击ID字段 | 跳转到目标记录 |
| 右键任意元素 | 上下文菜单 |
| 拖拽文件到窗口 | 自动导入 |

### 加载状态

```
┌─────────────────────────────────────────┐
│  正在加载...                            │
│                                         │
│  ████████████░░░░░░░░  60%              │
│                                         │
│  已处理: 156 / 260 条记录               │
│  预计剩余: 约 15 秒                     │
│                                         │
│  [在后台运行]  [取消]                   │
└─────────────────────────────────────────┘
```

---

## 颜色系统

### 语义色彩

| 用途 | 颜色 | 示例 |
|-----|------|------|
| 主色调 | #3B82F6 (蓝) | 主要按钮、链接 |
| 成功 | #10B981 (绿) | 保存成功、验证通过 |
| 警告 | #F59E0B (橙) | 需要注意 |
| 错误 | #EF4444 (红) | 错误、删除 |
| 信息 | #6366F1 (紫) | 提示、帮助 |
| 中性 | #6B7280 (灰) | 次要文字 |

### 机制分类色彩

保持现有的27色系统，确保视觉一致性。

---

## 实现优先级

### Phase 1 - 核心体验（4周）
1. ✅ 命令面板 (Cmd+K)
2. ✅ 系统健康仪表盘
3. ✅ 智能编辑器基础版

### Phase 2 - 安全感（3周）
4. 操作历史时间线
5. 变更预览对比
6. 一键回滚

### Phase 3 - 效率提升（3周）
7. 批量操作向导
8. 快捷键系统
9. 通知系统

### Phase 4 - 精雕细琢（2周）
10. 动画过渡
11. 键盘导航
12. 深色模式

---

## 设计师反馈收集

每个功能都应该内置反馈入口：

```
┌─────────────────────────────────────────┐
│  这个功能好用吗?                        │
│                                         │
│  [👍 好用]  [👎 不好用]  [💡 有建议]   │
│                                         │
└─────────────────────────────────────────┘
```

---

## 成功指标

| 指标 | 当前 | 目标 |
|------|------|------|
| 找到配置平均时间 | >1分钟 | <10秒 |
| 错误操作恢复时间 | 无法恢复 | <30秒 |
| 新功能学习时间 | >1小时 | <10分钟 |
| 用户信心指数 | 低 | 高 |
