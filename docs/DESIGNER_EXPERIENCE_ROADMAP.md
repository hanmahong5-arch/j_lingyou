# 设计师体验改进路线图

## 最终目标
**让设计师以最低认知负担、最少技术细节，高效地调整游戏内容**

---

## 第一阶段：消除"找不到"的问题

### 1.1 全局语义搜索中心
**目标**：一个搜索框解决所有定位问题

```
┌─────────────────────────────────────────────────┐
│  🔍 搜索: 火焰剑                                 │
├─────────────────────────────────────────────────┤
│  📦 物品 (3个结果)                               │
│    ├─ [100001] 烈焰之剑 - item_templates.xml    │
│    ├─ [100002] 火焰双手剑 - item_templates.xml  │
│    └─ [100003] 炎魔之刃 - item_templates.xml    │
│                                                 │
│  🎁 掉落 (2个结果)                               │
│    ├─ 火焰领主掉落 - npc_drops.xml              │
│    └─ 副本宝箱 - chest_rewards.xml              │
│                                                 │
│  📜 任务 (1个结果)                               │
│    └─ [Q1001] 寻找火焰剑 - quest_data.xml       │
└─────────────────────────────────────────────────┘
```

**实现要点**：
- 索引所有XML的ID、name、desc字段
- 支持拼音/模糊匹配
- 结果按机制分类展示
- 点击直接跳转到编辑界面

### 1.2 智能定位助手
**目标**：自然语言找配置

```
用户：我想调整30级以上的法杖攻击力
系统：找到 47 个符合条件的法杖，是否要批量编辑？
      [查看列表] [批量编辑] [导出Excel]
```

---

## 第二阶段：消除"看不懂"的问题

### 2.1 字段语义化展示
**目标**：让每个字段都有人话解释

```
原始XML:
  <bonus_attr1>physical_attack 150</bonus_attr1>
  <bonus_attr2>pvp_attack_ratio_physical 5</bonus_attr2>

语义化展示:
  ┌─────────────────────────────────────────┐
  │ ⚔️ 属性加成                             │
  ├─────────────────────────────────────────┤
  │ 槽位1: 物理攻击力 +150                   │
  │ 槽位2: PVP物理攻击加成 +5%               │
  │                                         │
  │ [+ 添加属性] [复制到其他物品]            │
  └─────────────────────────────────────────┘
```

**实现要点**：
- 利用已有的 `attr_dictionary` 表（126个属性）
- 字段名 → 中文名映射表
- 悬停提示显示字段说明和典型值范围

### 2.2 机制说明卡片
**目标**：每个机制都有"新手指南"

```
┌─────────────────────────────────────────────────┐
│ 🎒 物品系统 - 快速指南                          │
├─────────────────────────────────────────────────┤
│ 核心文件:                                       │
│   • item_templates.xml - 物品基础属性           │
│   • item_random_bonus.xml - 随机属性规则        │
│                                                 │
│ 关键字段:                                       │
│   • quality (品质): 1=普通 2=优秀 3=精良...     │
│   • level (等级): 1-80                          │
│   • bonus_attr* (属性槽): 最多12个              │
│                                                 │
│ 常见操作:                                       │
│   [创建新物品] [批量调整属性] [复制为模板]      │
└─────────────────────────────────────────────────┘
```

---

## 第三阶段：消除"填不对"的问题

### 3.1 智能表单编辑器
**目标**：不同字段类型有不同的输入方式

```
┌─────────────────────────────────────────────────┐
│ 编辑物品: [100001] 烈焰之剑                     │
├─────────────────────────────────────────────────┤
│                                                 │
│ 基础信息                                        │
│ ─────────────────────────────────────           │
│ ID:        100001 (只读)                        │
│ 名称:      [烈焰之剑________] ← 文本输入        │
│ 品质:      [★★★★☆ 史诗  ▼] ← 下拉选择         │
│ 等级需求:  [45____] (1-80)  ← 数值+范围提示     │
│                                                 │
│ 属性加成                                        │
│ ─────────────────────────────────────           │
│ 槽位1: [物理攻击力 ▼] [150__] ← 属性选择器     │
│ 槽位2: [魔法防御力 ▼] [80___]                   │
│ [+ 添加槽位]                                    │
│                                                 │
│ 关联配置                                        │
│ ─────────────────────────────────────           │
│ 掉落来源: 火焰领主(NPC:50001) [跳转查看]        │
│ 相关任务: Q1001 寻找火焰剑 [跳转查看]           │
│                                                 │
│        [取消] [预览变更] [保存]                 │
└─────────────────────────────────────────────────┘
```

**字段类型自动识别**：
| 字段模式 | 输入控件 | 智能功能 |
|---------|---------|---------|
| `*_id` | 下拉选择器 | 从引用表加载选项 |
| `bonus_attr*` | 属性选择器 | 126个属性下拉 |
| `quality`/`*_type` | 单选/下拉 | 枚举值自动识别 |
| `level`/`*_count` | 数值输入框 | 显示范围(min~max) |
| `is_*`/`can_*` | 开关按钮 | 布尔值 |
| `desc`/`name` | 多行文本 | 翻译辅助 |

### 3.2 智能值建议
**目标**：基于历史数据推荐合理值

```
正在编辑: 物理攻击力

  当前值: [____]

  💡 智能建议 (基于同等级物品):
     • 普通品质: 80~120
     • 精良品质: 120~180
     • 史诗品质: 180~250 ← 推荐
     • 传说品质: 250~350

  📊 参考数据:
     同类物品平均值: 215
     同等级最高值: 320
     同等级最低值: 150
```

---

## 第四阶段：消除"改不准"的问题

### 4.1 交互式引用图谱
**目标**：一眼看清影响范围，点击直达

```
         ┌──────────────┐
         │ 火焰领主     │
         │ (NPC:50001)  │
         └──────┬───────┘
                │ 掉落
    ┌───────────┴───────────┐
    ▼                       ▼
┌──────────┐         ┌──────────┐
│ 烈焰之剑 │         │ 火焰护符 │
│ (正在编辑)│         │ (ID:100005)│
└────┬─────┘         └──────────┘
     │ 任务奖励
     ▼
┌──────────────┐
│ Q1001        │
│ 寻找火焰剑   │
└──────────────┘

点击任意节点可跳转编辑
```

### 4.2 实时影响分析
**目标**：修改前就知道会影响什么

```
⚠️ 变更影响分析

您正在修改: [100001] 烈焰之剑

此修改将影响:
  📦 掉落表: 1处 (火焰领主的掉落列表)
  📜 任务表: 1处 (Q1001的任务奖励)
  🛒 商店表: 0处
  🎒 玩家背包: 预计影响 1,234 个角色

  [查看详细影响] [继续修改] [取消]
```

---

## 第五阶段：消除"怕改错"的问题

### 5.1 变更预览对比
**目标**：提交前看清所有改动

```
┌─────────────────────────────────────────────────┐
│ 📝 变更预览                                     │
├──────────────────────┬──────────────────────────┤
│ 修改前               │ 修改后                   │
├──────────────────────┼──────────────────────────┤
│ level: 40            │ level: 45          [!]  │
│ physical_attack: 120 │ physical_attack: 150 [!]│
│ bonus_attr1: ...     │ bonus_attr1: ...        │
│ (无变化的字段折叠)   │                          │
├──────────────────────┴──────────────────────────┤
│ 变更统计: 2个字段修改, 0个新增, 0个删除         │
│                                                 │
│        [返回编辑] [确认提交] [保存为草稿]       │
└─────────────────────────────────────────────────┘
```

### 5.2 一键回滚系统
**目标**：改错了随时能恢复

```
┌─────────────────────────────────────────────────┐
│ 📜 变更历史 - 烈焰之剑                          │
├─────────────────────────────────────────────────┤
│ ● 2024-12-25 14:30 - 调整攻击力 150→180        │
│   操作人: 张策划  [查看详情] [回滚到此版本]     │
│                                                 │
│ ○ 2024-12-24 10:15 - 调整等级需求 40→45        │
│   操作人: 李策划  [查看详情] [回滚到此版本]     │
│                                                 │
│ ○ 2024-12-20 16:00 - 创建物品                  │
│   操作人: 张策划  [查看详情] [回滚到此版本]     │
└─────────────────────────────────────────────────┘
```

---

## 第六阶段：提升效率的批量工具

### 6.1 可视化批量生成器
**目标**：像Excel一样批量创建

```
┌─────────────────────────────────────────────────┐
│ 🏭 批量生成向导 - 第2步: 定义生成规则          │
├─────────────────────────────────────────────────┤
│                                                 │
│ 基础模板: [100001] 烈焰之剑                     │
│ 生成数量: [10] 个                               │
│                                                 │
│ 变化规则:                                       │
│ ┌─────────────────────────────────────────────┐ │
│ │ 字段          规则           预览           │ │
│ ├─────────────────────────────────────────────┤ │
│ │ ID           自动递增        100002~100011  │ │
│ │ name         后缀递增        烈焰之剑II~XI  │ │
│ │ level        公式: 基础+5*n  45,50,55...    │ │
│ │ attack       公式: 基础*1.1^n 150,165,181.. │ │
│ └─────────────────────────────────────────────┘ │
│                                                 │
│ 预览生成结果:                                   │
│ ┌─────────────────────────────────────────────┐ │
│ │ #1: 烈焰之剑II   Lv50  ATK:165              │ │
│ │ #2: 烈焰之剑III  Lv55  ATK:181              │ │
│ │ #3: 烈焰之剑IV   Lv60  ATK:200              │ │
│ │ ... (展开查看全部)                          │ │
│ └─────────────────────────────────────────────┘ │
│                                                 │
│       [上一步] [下一步: 确认生成]               │
└─────────────────────────────────────────────────┘
```

### 6.2 条件批量修改器
**目标**：像SQL一样筛选+批改

```
┌─────────────────────────────────────────────────┐
│ 🔧 批量修改向导                                 │
├─────────────────────────────────────────────────┤
│                                                 │
│ 第1步: 筛选目标                                 │
│ ─────────────────────────────────               │
│ 条件: [等级] [>=] [50] [AND]                    │
│       [品质] [=] [史诗] [AND]                   │
│       [类型] [=] [武器]                         │
│                                                 │
│ 匹配结果: 找到 47 个物品 [预览列表]             │
│                                                 │
│ 第2步: 定义修改                                 │
│ ─────────────────────────────────               │
│ [physical_attack] = [当前值 * 1.2] (提升20%)    │
│ [+ 添加修改规则]                                │
│                                                 │
│ 第3步: 预览和确认                               │
│ ─────────────────────────────────               │
│ │ 物品名        原攻击力  新攻击力  变化       │
│ │ 烈焰之剑      150       180      +30(+20%)  │
│ │ 寒冰法杖      120       144      +24(+20%)  │
│ │ ...                                          │
│                                                 │
│            [取消] [执行批量修改]                │
└─────────────────────────────────────────────────┘
```

---

## 实现优先级

### P0 - 立即实现（解决最痛问题）
1. **全局语义搜索** - 让设计师能找到东西
2. **智能表单编辑器** - 让设计师能正确填写
3. **变更预览对比** - 让设计师敢于修改

### P1 - 短期实现（提升效率）
4. **字段语义化** - 让设计师看懂配置
5. **交互式引用图** - 让设计师理解关联
6. **一键回滚** - 让设计师有安全感

### P2 - 中期实现（批量能力）
7. **批量生成向导** - 提升创建效率
8. **条件批量修改** - 提升调整效率
9. **智能值建议** - 减少决策负担

### P3 - 长期完善（专业工具）
10. **机制说明卡片** - 新人培训
11. **协作批注系统** - 团队协作
12. **自动化工作流** - 流程标准化

---

## 技术实现建议

### 复用现有能力
| 新功能 | 可复用的现有模块 |
|-------|-----------------|
| 语义搜索 | GlobalSearchEngine + ID索引扩展 |
| 表单编辑器 | PatternField类型推断 + 值域分析 |
| 引用图谱 | MechanismRelationshipGraph + 扩展到记录级 |
| 变更预览 | OperationLogger + Diff算法 |
| 批量生成 | DataTemplate + PatternCollectorService |

### 新增核心模块
1. `DesignerEditorStage` - 设计师友好的编辑器主界面
2. `FieldSemanticService` - 字段语义化服务
3. `RecordNavigator` - 记录级跳转导航器
4. `ChangePreviewPanel` - 变更预览面板
5. `BatchWizard` - 批量操作向导框架

---

## 衡量成功的指标

| 指标 | 当前估计 | 目标 |
|------|---------|------|
| 定位配置平均时间 | 5分钟 | <30秒 |
| 字段含义理解度 | 30% | >90% |
| 填错值的概率 | 20% | <2% |
| 敢于修改的信心 | 低 | 高 |
| 单次修改耗时 | 10分钟 | <2分钟 |
| 批量操作效率 | 手工 | 10倍提升 |
